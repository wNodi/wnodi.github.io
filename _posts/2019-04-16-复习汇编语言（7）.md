---
layout:   post
title:    复习汇编指令（7）
subtitle:   Hello world,hello blog!
date:     2019-04-16
author:   吴柚
header-img: post-bg-desk.jpg
catalog:    true
tags:
    - 学习
---

## int指令
1. int指令和iret指令的配合使用与call指令和ret指令的配合使用具有相似的思路。

> 编写中断例程，就类似于编写子程序，我们希望中断处理完成后能继续回到原程序继续运行，所以应该使得中断例程返回。

2. BIOS和DOS所提供的中断例程

> 在系统板的ROM中存放着一套程序，称为BIOS（基本输入输出系统），BIOS中主要包含以下几部分内容。

* 硬件系统的检测和初始化程序；

* 外部中断和内部中断的中断例程；

* 用于对硬件设备进行I/O操作的中断例程；

* 其他和硬件系统相关的中断例程。

> 操作系统DOS也提供了中断例程，从操作系统的角度来看，DOS的中断例程就是操作系统向程序员提供的编程资源。

> BIOS和DOS在所提供的中断例程中包含了许多子程序，这些子程序实现了程序员在编程的时候经常需要用到的功能。程序员在编程的时候，可以用int指令直接调用BIOS和DOS提供的中断例程，来完成某些工作。

> 和硬件设备相关的DOS中断例程中，一般都调用了BIOS的中断例程。

4. BIOS和DOS中断例程安装过程：

* 开机后，CPU一加电，初始化CS=0FFFFH,IP=0，自动从FFFF:0单元开始执行程序。FFFF:0处有一条跳转指令，CPU执行该指令后，转去执行BIOS中的硬件系统检测和初始化程序。
跳转指令：jmp F000:998A
此处的指令不可修改！

* 初始化程序将建立BIOS所支持的中断向量，即将BIOS提供的中断例程的入口地址登记在中断向量表中。注意，对于BIOS所提供的中断例程，只需将入口地址登记在中断向量表中即可，因为它们是固化到ROM中的程序，一直在内存中存在。

* 硬件系统检测和初始化完成后，调用int 19h进行操作系统的引导。从此将计算机交由操作系统控制。证明int 19h只是BIOS提供的功能。

* DOS启动后，除完成其他工作外，还将它所提供的中断例程装入内存，并建立相应的中断向量。

5. BIOS中断例程：

> int 10h中断例程是BIOS提供的中断例程，其中包含了多个和屏幕输出相关的子程序。

> 一般来说，一个供程序员调用的中断例程中往往包括多个子程序，中断例程内部用传递进来的参数来决定执行哪一个子程序。BIOS和DOS提供的中断例程，都用ah来传递内部子程序的编号。

6. DOS中断例程：

> int 21h中断例程是DOS提供的中断例程，其中包含了DOS提供给程序员在编程时调用的子程序。
